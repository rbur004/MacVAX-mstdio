#include "mstdio.h"#include "mmalloc.h"/* getstdiobuf() * * Routine called by _mfilbuf() and mflsbuf() to allocate buffers. * */void_mgetstdiobuf(	register M_FILE	*iop){int blksize = MBUFSIZ;	/* For line buffered or fully buffered files, attempt	 * to find the optimal buffer size.	 */	iop->_base = mmalloc(blksize);	if (iop->_base == NULL) 	{		/* If the buffer allocataion fails then do unbuffered io.		 */		iop->_flag &= ~(_MIOFBF|_MIOLBF);		iop->_flag |= _MIONBF;	}	else 	{		/* Set up the buffer information in the iob.		 */		iop->_bufsiz = blksize;		iop->_ptr = iop->_base ;		iop->_flag |= _MIOMYBUF ;	}}