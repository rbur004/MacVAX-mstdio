/*includes*/#include	<stdio.h>#include	<stdlib.h>#include "aprintf.h"#include "mstdio.h"#include "mmalloc.h"static char *mfprintf_buff;//WARNING: A mfprintf must not generate more than 1024 Bytes per call.int mfprintf(void *my_va_alist, ...){int i;my_va_list ap;char *fmt;M_FILE *fp;	if(mfprintf_buff == (char *)0) //One off buffer allocation		mfprintf_buff = (char *)mcalloc(1024,1);//	va_start(ap, va_alist);	my_va_start(ap);		fp = my_va_arg(ap, M_FILE *);		fmt = my_va_arg(ap, char *);		if(( i = vsprintf(mfprintf_buff, fmt, ap)) < 0)		{			aprintf("error in mfprintf");			return -1;		}	my_va_end(ap);	mfputs(mfprintf_buff, fp); //transfer result to the file buffers.	return( i );}